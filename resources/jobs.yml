resources:
  jobs:
    # DATA Stage Jobs
    ocr_extraction:
      name: "[Ontos ML] OCR Extraction"
      description: "Extract text from images and documents using OCR"
      tasks:
        - task_key: ocr_extraction
          notebook_task:
            notebook_path: ../notebooks/data/ocr_extraction.py
          environment_key: serverless_env
      environments:
        - environment_key: serverless_env
          spec:
            client: "1"

    audio_transcription:
      name: "[Ontos ML] Audio Transcription"
      description: "Transcribe audio files to text"
      tasks:
        - task_key: audio_transcription
          notebook_task:
            notebook_path: ../notebooks/data/audio_transcription.py
          environment_key: serverless_env
      environments:
        - environment_key: serverless_env
          spec:
            client: "1"

    embedding_generation:
      name: "[Ontos ML] Embedding Generation"
      description: "Generate vector embeddings for text and images"
      tasks:
        - task_key: embedding_generation
          notebook_task:
            notebook_path: ../notebooks/data/embedding_generation.py
          environment_key: serverless_env
      environments:
        - environment_key: serverless_env
          spec:
            client: "1"

    ai_functions:
      name: "[Ontos ML] AI Functions"
      description: "Run AI functions (classify, extract, summarize, etc.)"
      tasks:
        - task_key: ai_functions
          notebook_task:
            notebook_path: ../notebooks/data/ai_functions.py
          environment_key: serverless_env
      environments:
        - environment_key: serverless_env
          spec:
            client: "1"

    # CURATE Stage Jobs
    labeling_agent:
      name: "[Ontos ML] Labeling Agent"
      description: "AI-assisted pre-labeling of curation items"
      tasks:
        - task_key: labeling_agent
          notebook_task:
            notebook_path: ../notebooks/curate/labeling_agent.py
          environment_key: serverless_env
      environments:
        - environment_key: serverless_env
          spec:
            client: "1"

    quality_scoring:
      name: "[Ontos ML] Quality Scoring"
      description: "Score item quality and detect duplicates"
      tasks:
        - task_key: quality_scoring
          notebook_task:
            notebook_path: ../notebooks/curate/quality_scoring.py
          environment_key: serverless_env
      environments:
        - environment_key: serverless_env
          spec:
            client: "1"

    # TRAIN Stage Jobs
    data_preparation:
      name: "[Ontos ML] Data Preparation"
      description: "Prepare approved items into training dataset"
      tasks:
        - task_key: data_preparation
          notebook_task:
            notebook_path: ../notebooks/train/data_preparation.py
          environment_key: serverless_env
      environments:
        - environment_key: serverless_env
          spec:
            client: "1"

    finetune_fmapi:
      name: "[Ontos ML] Fine-tune (FMAPI)"
      description: "Fine-tune model using Foundation Model APIs"
      tasks:
        - task_key: finetune_fmapi
          notebook_task:
            notebook_path: ../notebooks/train/finetune_fmapi.py
          environment_key: serverless_env
      environments:
        - environment_key: serverless_env
          spec:
            client: "1"

    model_evaluation:
      name: "[Ontos ML] Model Evaluation"
      description: "Evaluate model performance on test set"
      tasks:
        - task_key: model_evaluation
          notebook_task:
            notebook_path: ../notebooks/train/model_evaluation.py
          environment_key: serverless_env
      environments:
        - environment_key: serverless_env
          spec:
            client: "1"

    # MONITOR Stage Jobs
    drift_detection:
      name: "[Ontos ML] Drift Detection"
      description: "Detect input/output distribution drift"
      schedule:
        quartz_cron_expression: "0 0 * * * ?"
        timezone_id: "UTC"
      tasks:
        - task_key: drift_detection
          notebook_task:
            notebook_path: ../notebooks/monitor/drift_detection.py
          environment_key: serverless_env
      environments:
        - environment_key: serverless_env
          spec:
            client: "1"

    feedback_analysis:
      name: "[Ontos ML] Feedback Analysis"
      description: "Analyze user feedback and identify patterns"
      schedule:
        quartz_cron_expression: "0 0 6 * * ?"
        timezone_id: "UTC"
      tasks:
        - task_key: feedback_analysis
          notebook_task:
            notebook_path: ../notebooks/improve/feedback_analysis.py
          environment_key: serverless_env
      environments:
        - environment_key: serverless_env
          spec:
            client: "1"
