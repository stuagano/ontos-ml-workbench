# ============================================================================
# Ontos ML Workbench - Backend Environment Configuration
# ============================================================================
# Copy this file to .env and configure for your environment

# ============================================================================
# Application Configuration
# ============================================================================

APP_NAME=ontos-ml-workbench
APP_VERSION=0.1.0

# Environment: development, staging, production
ENVIRONMENT=development

# Enable debug mode (detailed logging, error traces)
# WARNING: Never enable in production
DEBUG=true

# Server port for local development
PORT=5000

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=DEBUG

# ============================================================================
# Databricks Configuration
# ============================================================================

# Option 1: OAuth U2M via CLI profile (RECOMMENDED for local development)
# Run: databricks auth login https://your-workspace.cloud.databricks.com --profile=ontos-dev
DATABRICKS_CONFIG_PROFILE=ontos-dev

# Option 2: Personal Access Token (legacy, for scripts/automation)
# Generate at: Workspace Settings > User Settings > Access Tokens
# WARNING: Never commit this token to version control
# DATABRICKS_HOST=https://your-workspace.cloud.databricks.com
# DATABRICKS_TOKEN=dapi...

# Connection timeout (seconds)
DATABRICKS_CONNECTION_TIMEOUT=120

# ============================================================================
# Unity Catalog Configuration
# ============================================================================

# Unity Catalog catalog name
# Development: Use your personal catalog (e.g., home_firstname_lastname)
# Production: Use shared catalog (e.g., ontos_ml)
DATABRICKS_CATALOG=your_catalog

# Unity Catalog schema name
# Development: ontos_ml_workbench or ontos_ml_workbench_dev
# Production: workbench
DATABRICKS_SCHEMA=ontos_ml_workbench

# SQL Warehouse ID for query execution
# Find via: Databricks SQL > SQL Warehouses > [warehouse name] > Connection Details
# Example: 387bcda0f2ece20c
DATABRICKS_WAREHOUSE_ID=

# SQL execution settings (optional)
SQL_QUERY_TIMEOUT_SECONDS=30
USE_SERVERLESS_SQL=false

# ============================================================================
# API Configuration
# ============================================================================

# API path prefix
API_PREFIX=/api/v1

# CORS origins (for local development)
CORS_ORIGINS=["http://localhost:5173","http://localhost:5000","http://localhost:3000"]

# ============================================================================
# Lakebase Configuration (Optimized OLTP schema)
# ============================================================================

# Lakebase uses a separate schema with engine='postgres' for optimized OLTP reads
# The schema is automatically detected and uses the same SQL Warehouse
LAKEBASE_SCHEMA=ontos_ml_lakebase

# ============================================================================
# Example Store Configuration (PRD v2)
# ============================================================================

# Vector Search endpoint name (created in Databricks workspace)
VECTOR_SEARCH_ENDPOINT=ontos-ml-workbench-vs-endpoint

# Vector Search index name for examples
VECTOR_SEARCH_INDEX_NAME=example_store_vs_index

# Embedding model for generating example embeddings
# Options: databricks-bge-large-en, databricks-gte-large-en, text-embedding-ada-002
EMBEDDING_MODEL=databricks-bge-large-en

# Embedding dimension (must match the model)
# databricks-bge-large-en: 1024
# databricks-gte-large-en: 1024
# text-embedding-ada-002: 1536
EMBEDDING_DIMENSION=1024

# ============================================================================
# DSPy Integration Configuration (PRD v2)
# ============================================================================

# Default DSPy optimizer type
DSPY_DEFAULT_OPTIMIZER=BootstrapFewShot

# MLflow experiment prefix for DSPy runs
DSPY_MLFLOW_EXPERIMENT_PREFIX=/Shared/ontos-ml-workbench/dspy
