%%{init: {'theme':'base', 'themeVariables': { 'primaryColor':'#FF3621','primaryTextColor':'#fff','primaryBorderColor':'#1B3A57','lineColor':'#5f6368','secondaryColor':'#1B3A57','tertiaryColor':'#E8E8E8'}}}%%
flowchart LR
    subgraph S1["1. DATA"]
        D1[Extract & Transform]
        D2[AI Functions]
        D3[OCR, Embeddings]
    end

    subgraph S2["2. TEMPLATE"]
        T1[Prompt Templates]
        T2[Reusable IP]
        T3[Multi-Modal]
    end

    subgraph S3["3. CURATE"]
        C1[AI Pre-Labeling]
        C2[Human Review]
        C3[SME Validation]
    end

    subgraph S4["4. TRAIN"]
        TR1[Fine-Tune FMAPI]
        TR2[MLflow Tracking]
        TR3[Experiment Mgmt]
    end

    subgraph S5["5. DEPLOY"]
        DE1[Model Serving]
        DE2[Agent Builder]
        DE3[Tool Registry]
    end

    subgraph S6["6. MONITOR"]
        MO1[Drift Detection]
        MO2[Trace Viewer]
        MO3[Alerts & Metrics]
    end

    subgraph S7["7. IMPROVE"]
        IM1[Feedback Capture]
        IM2[Gap Analysis]
        IM3[Attribution]
    end

    S1 ==> S2 ==> S3 ==> S4 ==> S5 ==> S6 ==> S7
    S7 -.->|Continuous Loop| S1

    style S1 fill:#1B3A57,stroke:#FF3621,stroke-width:3px,color:#fff
    style S2 fill:#1B3A57,stroke:#FF3621,stroke-width:3px,color:#fff
    style S3 fill:#FF3621,stroke:#1B3A57,stroke-width:3px,color:#fff
    style S4 fill:#FF3621,stroke:#1B3A57,stroke-width:3px,color:#fff
    style S5 fill:#1B3A57,stroke:#FF3621,stroke-width:3px,color:#fff
    style S6 fill:#1B3A57,stroke:#FF3621,stroke-width:3px,color:#fff
    style S7 fill:#FF3621,stroke:#1B3A57,stroke-width:3px,color:#fff
